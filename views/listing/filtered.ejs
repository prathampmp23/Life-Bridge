<% layout("layouts/boilerplate") %>

<h2 class="heading">Nearest Blood Banks</h2>

<div id="map"></div>

<script>
  // Mapbox access token
  mapboxgl.accessToken = "<%= process.env.MAP_TOKEN %>";
</script>

<div class="search-container">
  <h2>Find Donors</h2>
  <form action="/lifeBridge/filtered/search" method="GET">
    <select name="bloodGroup">
      <option value="">Select Blood Group</option>
      <option value="A+">A+</option>
      <option value="A-">A-</option>
      <option value="B+">B+</option>
      <option value="B-">B-</option>
      <option value="O+">O+</option>
      <option value="O-">O-</option>
      <option value="AB+">AB+</option>
      <option value="AB-">AB-</option>
    </select>
    <select name="region">
      <option value="">Select Region</option>
      <option value="North">North</option>
      <option value="South">South</option>
      <option value="East">East</option>
      <option value="West">West</option>
    </select>
    <select name="district">
      <option value="">Select District</option>
      <option value="District 1">District 1</option>
      <option value="District 2">District 2</option>
      <option value="District 3">District 3</option>
    </select>
    <button type="submit" class="submit-btn">SUBMIT</button>
  </form>
</div>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>NAME</th>
      <th>TYPE</th>
      <th>STATUS</th>
      <th>Mobile No.</th>
      <th>Call</th>
      <th>Report</th>
    </tr>
  </thead>
  <% if(donors) %>
  <tbody>
    <% donors.forEach(donor => { %>
    <tr>
      <td><%= donor.id %></td>
      <td><%= donor.name %></td>
      <td><%= donor.bloodGroup %></td>
      <td class="available"><%= donor.status %></td>
      <td><%= donor.mobile %></td>
      <td><a href="tel:<%= donor.mobile %>">ðŸ“ž</a></td>
      <td><a href="#" class="report">Report</a></td>
    </tr>
    <% }); %>
  </tbody>
</table>
